{"docstore/data": {"fb5cf2e5-d61b-419b-978f-5dfe231d0882": {"__data__": {"id_": "fb5cf2e5-d61b-419b-978f-5dfe231d0882", "embedding": null, "metadata": {"Header_1": " Introduction:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb204a9f-a3c7-4657-be27-5f02e6c2bd4a", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Solving Multi-Tenancy Challenges"}, "hash": "aea00da8881c30d7c7943b435e8744c7cc20bfba1e870ba28fb124612fffc2e7", "class_name": "RelatedNodeInfo"}}, "text": "Introduction:\n\nThe concept of Multi-Tenancy in RAG (Retriever-Augmented Generation) systems\nhas become increasingly vital, especially when it comes to data security and\nprivacy. Multi-Tenancy, in simple terms, refers to a system\u2019s ability to serve\nmultiple users (\u2018tenants\u2019) independently and securely.\n\nConsider this scenario: In a RAG system, there are two users, User-1 and\nUser-2. Both have their own set of documents which they have indexed into the\nsystem. The critical aspect of Multi-Tenancy here is that when User-1 queries\nthe system, they should only receive answers from the documents they have\nindexed, and not from the documents indexed by User-2, and vice versa. This\nseparation is crucial for maintaining data confidentiality and security, as it\nprevents the accidental or unauthorized cross-referencing of private\ninformation between different users.\n\nIn the context of Multi-Tenancy in RAG systems, this means designing a system\nthat not only understands and retrieves information effectively but also\nstrictly adheres to user-specific data boundaries. Each user\u2019s interaction\nwith the system is isolated, ensuring that the retriever component of the RAG\npipeline accesses only the information relevant and permitted for that\nparticular user. This approach is important in scenarios where sensitive or\nproprietary data is involved, as it safeguards against data leaks and privacy\nbreaches.\n\nIn this blog post, we will look into Building a Multi-Tenancy RAG System with\nLlamaIndex.", "mimetype": "text/plain", "start_char_idx": 3, "end_char_idx": 1501, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "bb204a9f-a3c7-4657-be27-5f02e6c2bd4a": {"__data__": {"id_": "bb204a9f-a3c7-4657-be27-5f02e6c2bd4a", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Solving Multi-Tenancy Challenges", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fb5cf2e5-d61b-419b-978f-5dfe231d0882", "node_type": "1", "metadata": {"Header_1": " Introduction:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "1972003ec75a50937caabb54e360785b557ffa606e1d43e5835c817000fc8709", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a09913d9-c3be-45ac-8153-d8b1c3f99ec2", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Download Data:"}, "hash": "3e8d4c68e679789f60cdf640c48f16720d947aaf90ddf63564b953ad2dab96f6", "class_name": "RelatedNodeInfo"}}, "text": "Solving Multi-Tenancy Challenges\n\nThe key to managing Multi-Tenancy lies within the metadata. When indexing\ndocuments, we incorporate user-specific information into the metadata before\nadding it to the index. This ensures that each document is uniquely tied to an\nindividual user.\n\nDuring the query phase, the retriever uses this metadata to filter and only\naccess documents associated with the querying user. Subsequently, it performs\na semantic search to retrieve the most relevant information segments, or\n\u2018top_k chunks\u2019, for that user. By implementing this approach, we effectively\nprevent the unauthorized cross-referencing of private information between\ndifferent users, upholding the integrity and confidentiality of each user\u2019s\ndata.\n\nNow that we\u2019ve discussed the concept, let\u2019s dive into the construction of a\nMulti-Tenancy RAG system. For an in-depth step-by-step guide, feel free to\nfollow along with the subsequent instructions in our [ Google Colab Notebook\n](https://colab.research.google.com/github/run-\nllama/llama_index/blob/main/docs/examples/multi_tenancy/multi_tenancy_rag.ipynb)\n.", "mimetype": "text/plain", "start_char_idx": 1507, "end_char_idx": 2608, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a09913d9-c3be-45ac-8153-d8b1c3f99ec2": {"__data__": {"id_": "a09913d9-c3be-45ac-8153-d8b1c3f99ec2", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Download Data:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bb204a9f-a3c7-4657-be27-5f02e6c2bd4a", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Solving Multi-Tenancy Challenges", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "34c832d64d3529e02b40436790bf486b159bc1b30fb6cebfeacb1aad00ac287b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b9d344cc-4e89-43d7-835a-e1b4fcf580d2", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Load Data:"}, "hash": "5451e9446f763b6b90a8b7b45127883b26179f74a86d12a80d5ef43a586f6da5", "class_name": "RelatedNodeInfo"}}, "text": "Download Data:\n\nWe will use ` An LLM Compiler for Parallel Function Calling ` and ` Dense X\nRetrieval: What Retrieval Granularity Should We Use? ` papers for the\ndemonstrations.\n\n    \n    \n    !wget --user-agent \"Mozilla\" \"https://arxiv.org/pdf/2312.04511.pdf\" -O \"llm_compiler.pdf\"\n    !wget --user-agent \"Mozilla\" \"https://arxiv.org/pdf/2312.06648.pdf\" -O \"dense_x_retrieval.pdf\"", "mimetype": "text/plain", "start_char_idx": 2614, "end_char_idx": 2995, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "b9d344cc-4e89-43d7-835a-e1b4fcf580d2": {"__data__": {"id_": "b9d344cc-4e89-43d7-835a-e1b4fcf580d2", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Load Data:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a09913d9-c3be-45ac-8153-d8b1c3f99ec2", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Download Data:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "1d8b843e28a83db4f52147486f091fce96de8f93395919f868052b5904effb5b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46144fac-6c38-43d7-9db4-1bf2ff6e7764", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Create An Empty Index:"}, "hash": "0f3275d9f9e79cd7d5fbd02ed9f29f1e1ca0dcf5fea458317624a84538935715", "class_name": "RelatedNodeInfo"}}, "text": "Load Data:\n\nWe will load the data of ` LLMCompiler ` paper for user ` Jerry ` and ` Dense\nX Retrieval ` paper for user ` Ravi `\n\n    \n    \n    reader = SimpleDirectoryReader(input_files=['dense_x_retrieval.pdf'])\n    documents_jerry = reader.load_data()\n    \n    reader = SimpleDirectoryReader(input_files=['llm_compiler.pdf'])\n    documents_ravi = reader.load_data()", "mimetype": "text/plain", "start_char_idx": 3001, "end_char_idx": 3368, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "46144fac-6c38-43d7-9db4-1bf2ff6e7764": {"__data__": {"id_": "46144fac-6c38-43d7-9db4-1bf2ff6e7764", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Create An Empty Index:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b9d344cc-4e89-43d7-835a-e1b4fcf580d2", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Load Data:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "0ba5401d448faf062369e8d5fe74f729d89d1eab4f750eabfe8ff2b4fc31b69a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ab707370-9549-4cf1-8ed6-61c863737dd4", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Ingestion Pipeline:"}, "hash": "675783ef4b27b08f6c279f31e4e6aafa4fabf80a90d18b81c6b8d3589753db73", "class_name": "RelatedNodeInfo"}}, "text": "Create An Empty Index:\n\nWe will initially create an empty index to which we can insert documents, each\ntagged with metadata containing the user information.\n\n    \n    \n    index = VectorStoreIndex.from_documents(documents=[])", "mimetype": "text/plain", "start_char_idx": 3374, "end_char_idx": 3599, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ab707370-9549-4cf1-8ed6-61c863737dd4": {"__data__": {"id_": "ab707370-9549-4cf1-8ed6-61c863737dd4", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Ingestion Pipeline:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46144fac-6c38-43d7-9db4-1bf2ff6e7764", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Create An Empty Index:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "e258da75af8c5baae8257e79a2fe7b6fad43d2a0d2a0fdbc47af96e597cf4c63", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f4f193a0-ab98-4b4b-903f-666a15c9a829", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Update Metadata and Insert Documents:"}, "hash": "699c09c146ae111785bca212dc1ae792ff151d8ea32fbfbf0c9af25195c941b7", "class_name": "RelatedNodeInfo"}}, "text": "Ingestion Pipeline:\n\nThe IngestionPipeline is useful for data ingestion and performing\ntransformations, including chunking, metadata extraction, and more. Here we\nutilize it to create nodes, which are then inserted into the index.\n\n    \n    \n    pipeline = IngestionPipeline(\n        transformations=[\n            SentenceSplitter(chunk_size=512, chunk_overlap=20),\n        ]\n    )", "mimetype": "text/plain", "start_char_idx": 3605, "end_char_idx": 3986, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "f4f193a0-ab98-4b4b-903f-666a15c9a829": {"__data__": {"id_": "f4f193a0-ab98-4b4b-903f-666a15c9a829", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Update Metadata and Insert Documents:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ab707370-9549-4cf1-8ed6-61c863737dd4", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Ingestion Pipeline:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "18713c73ab8b6016eaf372d02a7b39b449113f406702ff7b0db5262a078ec211", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2e9a685b-f440-44da-b0b2-0826835684a1", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Define Query Engines:"}, "hash": "7fb18b4ab5c3830c33efc3aeb2e886a4b00cb763008b4d8927d9bd6b1fe2784c", "class_name": "RelatedNodeInfo"}}, "text": "Update Metadata and Insert Documents:\n\nWe will update the metadata of the documents with each user and insert the\ndocuments into the index.\n\n    \n    \n    # For user Jerry\n    for document in documents_jerry:\n        document.metadata['user'] = 'Jerry'\n    \n    nodes = pipeline.run(documents=documents_jerry)\n    # Insert nodes into the index\n    index.insert_nodes(nodes)\n    \n    # For user Ravi\n    for document in documents_ravi:\n        document.metadata['user'] = 'Ravi'\n    \n    nodes = pipeline.run(documents=documents_ravi)\n    # Insert nodes into the index\n    index.insert_nodes(nodes)", "mimetype": "text/plain", "start_char_idx": 3992, "end_char_idx": 4589, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "2e9a685b-f440-44da-b0b2-0826835684a1": {"__data__": {"id_": "2e9a685b-f440-44da-b0b2-0826835684a1", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Define Query Engines:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f4f193a0-ab98-4b4b-903f-666a15c9a829", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Update Metadata and Insert Documents:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "7b50274a7387d722559bbc1497f05a51916d22a6c65cb66197508b821275a689", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "949bb62f-6dd9-44ca-9c2a-0a38ab5f7ec7", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Querying:"}, "hash": "463c13d9826d04a8afb8fce6ef39815c51c2828e91a13848da13b45d3dfd1a33", "class_name": "RelatedNodeInfo"}}, "text": "Define Query Engines:\n\nWe will define query engines for both the users with necessary filters.\n\n    \n    \n    # For Jerry\n    jerry_query_engine = index.as_query_engine(\n        filters=MetadataFilters(\n            filters=[\n                ExactMatchFilter(\n                    key=\"user\",\n                    value=\"Jerry\",\n                )\n            ]\n        ),\n        similarity_top_k=3\n    )\n    \n    # For Ravi\n    ravi_query_engine = index.as_query_engine(\n        filters=MetadataFilters(\n            filters=[\n                ExactMatchFilter(\n                    key=\"user\",\n                    value=\"Ravi\",\n                )\n            ]\n        ),\n        similarity_top_k=3\n    )", "mimetype": "text/plain", "start_char_idx": 4595, "end_char_idx": 5294, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "949bb62f-6dd9-44ca-9c2a-0a38ab5f7ec7": {"__data__": {"id_": "949bb62f-6dd9-44ca-9c2a-0a38ab5f7ec7", "embedding": null, "metadata": {"Header_1": " Introduction:", "Header_2": " Querying:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2e9a685b-f440-44da-b0b2-0826835684a1", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Define Query Engines:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "a7b3878c181d12687a7f634e261602cb3fd94f50b5ec43a042bc2aef3ee919c8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1258a114-6c0a-41f3-b8e7-9187ae581082", "node_type": "1", "metadata": {"Header_1": " What\u2019s Next?"}, "hash": "b1fef2c30030e6ddcae231685a7dac3edd6cd82feb3b0724cd2d67002b85b7d2", "class_name": "RelatedNodeInfo"}}, "text": "Querying:\n\n    \n    \n    # Jerry has Dense X Rerieval paper and should be able to answer following question.\n    response = jerry_query_engine.query(\n        \"what are propositions mentioned in the paper?\"\n    )\n\n> The paper mentions propositions as an alternative retrieval unit choice.\n> Propositions are defined as atomic expressions of meanings in text that\n> correspond to distinct pieces of meaning in the text. They are minimal and\n> cannot be further split into separate propositions. Each proposition is\n> contextualized and self-contained, including all the necessary context from\n> the text to interpret its meaning. The paper demonstrates the concept of\n> propositions using an example about the Leaning Tower of Pisa, where the\n> passage is split into three propositions, each corresponding to a distinct\n> factoid about the tower.\n    \n    \n    # Ravi has LLMCompiler paper\n    response = ravi_query_engine.query(\"what are steps involved in LLMCompiler?\")\n\n> LLMCompiler consists of three key components: an LLM Planner, a Task\n> Fetching Unit, and an Executor. The LLM Planner identifies the execution\n> flow by defining different function calls and their dependencies based on\n> user inputs. The Task Fetching Unit dispatches the function calls that can\n> be executed in parallel after substituting variables with the actual outputs\n> of preceding tasks. Finally, the Executor executes the dispatched function\n> calling tasks using the associated tools. These components work together to\n> optimize the parallel function calling performance of LLMs.\n    \n    \n    # This should not be answered as Jerry does not have information about LLMCompiler\n    response = jerry_query_engine.query(\"what are steps involved in LLMCompiler?\")\n\n> I\u2019m sorry, but I couldn\u2019t find any information about the steps involved in\n> LLMCompiler in the given context.\n\nAs demonstrated, if Jerry queries the system regarding a document indexed by\nRavi, the system does not retrieve any answers from that document.", "mimetype": "text/plain", "start_char_idx": 5300, "end_char_idx": 7304, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1258a114-6c0a-41f3-b8e7-9187ae581082": {"__data__": {"id_": "1258a114-6c0a-41f3-b8e7-9187ae581082", "embedding": null, "metadata": {"Header_1": " What\u2019s Next?", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "949bb62f-6dd9-44ca-9c2a-0a38ab5f7ec7", "node_type": "1", "metadata": {"Header_1": " Introduction:", "Header_2": " Querying:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "3225989a265a4891f590c3cb2df5fdfff406ba673f4dc32226ca46c3031a319b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "21c9c78c-4528-4763-9d7b-8636d4ef64f0", "node_type": "1", "metadata": {"Header_1": " What\u2019s Next?", "Header_2": " References:"}, "hash": "7c15bf69a2a8bf3b26bdb11e7841f086f451128520eae30b165c767c1802809b", "class_name": "RelatedNodeInfo"}}, "text": "What\u2019s Next?\n\nWe have included a [ MultiTenancyRAGPack ](https://github.com/run-llama/llama-\nhub/tree/main/llama_hub/llama_packs/multi_tenancy_rag) within the LlamaPacks\nand [ Replit template ](https://replit.com/@LlamaIndex/LlamaIndex-Multi-\nTenancy-RAG#README.md) which offers a Streamlit interface for hands-on\nexperience. Be sure to explore it.", "mimetype": "text/plain", "start_char_idx": 7309, "end_char_idx": 7657, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "21c9c78c-4528-4763-9d7b-8636d4ef64f0": {"__data__": {"id_": "21c9c78c-4528-4763-9d7b-8636d4ef64f0", "embedding": null, "metadata": {"Header_1": " What\u2019s Next?", "Header_2": " References:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0", "node_type": "4", "metadata": {"filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "667402b2ba4c5d200bf8947e8926eb677ce0a2af2ac24ff99f0099c3d4887f50", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1258a114-6c0a-41f3-b8e7-9187ae581082", "node_type": "1", "metadata": {"Header_1": " What\u2019s Next?", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}, "hash": "9b190dd6f711d5225f9f1cad1282f70a0e616f98499b47ab2d24c8694c2e5824", "class_name": "RelatedNodeInfo"}}, "text": "References:\n\n[ Multi-Tenancy RAG with Qdrant and LlamaIndex.\n](https://qdrant.tech/documentation/tutorials/llama-index-multitenancy/)", "mimetype": "text/plain", "start_char_idx": 7663, "end_char_idx": 7796, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"fb5cf2e5-d61b-419b-978f-5dfe231d0882": {"doc_hash": "1972003ec75a50937caabb54e360785b557ffa606e1d43e5835c817000fc8709", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "bb204a9f-a3c7-4657-be27-5f02e6c2bd4a": {"doc_hash": "34c832d64d3529e02b40436790bf486b159bc1b30fb6cebfeacb1aad00ac287b", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "a09913d9-c3be-45ac-8153-d8b1c3f99ec2": {"doc_hash": "1d8b843e28a83db4f52147486f091fce96de8f93395919f868052b5904effb5b", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "b9d344cc-4e89-43d7-835a-e1b4fcf580d2": {"doc_hash": "0ba5401d448faf062369e8d5fe74f729d89d1eab4f750eabfe8ff2b4fc31b69a", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "46144fac-6c38-43d7-9db4-1bf2ff6e7764": {"doc_hash": "e258da75af8c5baae8257e79a2fe7b6fad43d2a0d2a0fdbc47af96e597cf4c63", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "ab707370-9549-4cf1-8ed6-61c863737dd4": {"doc_hash": "18713c73ab8b6016eaf372d02a7b39b449113f406702ff7b0db5262a078ec211", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "f4f193a0-ab98-4b4b-903f-666a15c9a829": {"doc_hash": "7b50274a7387d722559bbc1497f05a51916d22a6c65cb66197508b821275a689", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "2e9a685b-f440-44da-b0b2-0826835684a1": {"doc_hash": "a7b3878c181d12687a7f634e261602cb3fd94f50b5ec43a042bc2aef3ee919c8", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "949bb62f-6dd9-44ca-9c2a-0a38ab5f7ec7": {"doc_hash": "3225989a265a4891f590c3cb2df5fdfff406ba673f4dc32226ca46c3031a319b", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "1258a114-6c0a-41f3-b8e7-9187ae581082": {"doc_hash": "9b190dd6f711d5225f9f1cad1282f70a0e616f98499b47ab2d24c8694c2e5824", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}, "21c9c78c-4528-4763-9d7b-8636d4ef64f0": {"doc_hash": "936ead817b636b1e78bbca7d4d6e8aa9d0dd3831d392949be74c8ceb73b1b6b5", "ref_doc_id": "f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0"}}, "docstore/ref_doc_info": {"f4ece2a5-e8fa-4151-99c4-fedd68bfdeb0": {"node_ids": ["fb5cf2e5-d61b-419b-978f-5dfe231d0882", "bb204a9f-a3c7-4657-be27-5f02e6c2bd4a", "a09913d9-c3be-45ac-8153-d8b1c3f99ec2", "b9d344cc-4e89-43d7-835a-e1b4fcf580d2", "46144fac-6c38-43d7-9db4-1bf2ff6e7764", "ab707370-9549-4cf1-8ed6-61c863737dd4", "f4f193a0-ab98-4b4b-903f-666a15c9a829", "2e9a685b-f440-44da-b0b2-0826835684a1", "949bb62f-6dd9-44ca-9c2a-0a38ab5f7ec7", "1258a114-6c0a-41f3-b8e7-9187ae581082", "21c9c78c-4528-4763-9d7b-8636d4ef64f0"], "metadata": {"Header_1": " Introduction:", "filename": "building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b.md", "extension": ".md", "title": "Building Multi-Tenancy RAG System with LlamaIndex", "date": "Jan 15, 2024", "url": "https://www.llamaindex.ai/blog/building-multi-tenancy-rag-system-with-llamaindex-0d6ab4e0c44b"}}}}