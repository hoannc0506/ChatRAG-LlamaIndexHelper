{"docstore/data": {"4aa3e54c-1be8-4e7e-97ab-574a928f4a4f": {"__data__": {"id_": "4aa3e54c-1be8-4e7e-97ab-574a928f4a4f", "embedding": null, "metadata": {"Header_1": " Introduction", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30d43f82-a119-4782-81fe-f03dd69a9768", "node_type": "4", "metadata": {"filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "7a2fbbd8b49be60e4f4d69b2b010168ddc957b06828b11a02ac22adfbfd31e27", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0c50c51a-a2e9-4548-8ff5-34a6ab9d2aa3", "node_type": "1", "metadata": {"Header_1": " Set up"}, "hash": "b6cadfb37a726140d24c69b23c087d75bfbb6b34cc5b720c222104cf02d62094", "class_name": "RelatedNodeInfo"}}, "text": "Introduction\n\nWe are seeing a huge wave of developers building Retrieval Augmented\nGeneration (RAG) applications. The RAG tech stack generally contains a\nretrieval pipeline, LLM and prompt, among which LLM is accessible and\ndevelopers are comfortable with prompt customization. However, developers new\nto search and index often need extensive help to build an effective\n**retrieval** pipeline. A production-ready retrieval pipeline typically\nconsists of the following components:\n\n  * Document loader that parses and splits the long text \n  * Embedding model serving as core indexing component \n  * A vector database that stores the vector embeddings \n  * Advanced components to future optimize retrieval quality, such as re-ranker model to judge semantic similarity better \n\nIt\u2019s challenging to operate this complex tech stack. It involves managing\nsoftware package dependencies, hosting services in Kubernetes clusters, and\nmonitoring the performance of ML models. The high DevOps cost distracts\ndevelopers from the most critical part of the user experience of RAG\napplications: prompt engineering, answer generation, and user interface.\n\nWhile experienced search infrastructure engineers may still manage a\ncomplicated tech stack for its flexibility, Zilliz believes that most RAG\ndevelopers could benefit from a retrieval API service that is user-friendly\nand allows for lighter customization.\n\nIntegrating **Zilliz Cloud Pipelines** and **LlamaIndex** brings a new\napproach to solving this problem. Zilliz Cloud Pipelines is a fully managed,\nscalable retrieval service. LlamaIndex is a flexible RAG framework that\nprovides libraries and tools for organizing business logics such as retrieval\nand prompt engineering. The API service of Zilliz Cloud Pipelines is\nabstracted as a ManagedIndex in LlamaIndex. RAG developers using\n**_ZillizCloudPipelineIndex_ ** can easily scale the app from one user to\nmillions of users without the hassle of setting up and maintaining the complex\nretrieval tech stack. It hides the technical complexity behind a few function\ncalls, so that developers can focus on the core user experience of their RAG\napps.\n\nIn this blog, we show how to use _ZillizCloudPipelineIndex_ to build a high\nquality RAG chatbot. The chatbot is scalable and supports multi-tenancy\nthrough metadata filtering.", "mimetype": "text/plain", "start_char_idx": 3, "end_char_idx": 2324, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0c50c51a-a2e9-4548-8ff5-34a6ab9d2aa3": {"__data__": {"id_": "0c50c51a-a2e9-4548-8ff5-34a6ab9d2aa3", "embedding": null, "metadata": {"Header_1": " Set up", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30d43f82-a119-4782-81fe-f03dd69a9768", "node_type": "4", "metadata": {"filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "7a2fbbd8b49be60e4f4d69b2b010168ddc957b06828b11a02ac22adfbfd31e27", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4aa3e54c-1be8-4e7e-97ab-574a928f4a4f", "node_type": "1", "metadata": {"Header_1": " Introduction", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "9cfb6bfcbc72f7fb9dfe4488aaee806aaceb5111fbe30087b02a40310fe79a49", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4484e815-a0b3-4170-bbe4-00226df4960e", "node_type": "1", "metadata": {"Header_1": " Ingest Documents"}, "hash": "8bf6a02333edb0c2a853783b7256570eebe782288f31142a13024a92d3e9ee73", "class_name": "RelatedNodeInfo"}}, "text": "Set up\n\nSince Zilliz Cloud Pipelines is an API service, first you need to set up a [\nZilliz Cloud\n](https://cloud.zilliz.com/signup?utm_source=referral&utm_medium=partner&utm_campaign=2024-01-18_blog_zcp-\nllamaindex_llamaindex&utm_content=llamaindex) account and create a free\nserverless cluster.\n\nNow you can construct **_ZillizCloudPipelineIndex_ ** and get the handler to\nindex docs and query later.\n\n    \n    \n    from llama_index.indices import ZillizCloudPipelineIndex\n    \n    zcp_index = ZillizCloudPipelineIndex(\n        project_id=\"&lt;YOUR_ZILLIZ_PROJECT_ID&gt;\",\n        cluster_id=\"&lt;YOUR_ZILLIZ_CLUSTER_ID&gt;\",\n        token=\"&lt;YOUR_ZILLIZ_API_KEY&gt;\",\n    )\n    zcp_index.create_pipelines(metadata_schema={\"user_id\": \"VarChar\", \"version\": \"VarChar\"})\n\nYou can copy the Project ID, Cluster ID and API Key from your Zilliz account\nas follows:", "mimetype": "text/plain", "start_char_idx": 2329, "end_char_idx": 3190, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "4484e815-a0b3-4170-bbe4-00226df4960e": {"__data__": {"id_": "4484e815-a0b3-4170-bbe4-00226df4960e", "embedding": null, "metadata": {"Header_1": " Ingest Documents", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30d43f82-a119-4782-81fe-f03dd69a9768", "node_type": "4", "metadata": {"filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "7a2fbbd8b49be60e4f4d69b2b010168ddc957b06828b11a02ac22adfbfd31e27", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c50c51a-a2e9-4548-8ff5-34a6ab9d2aa3", "node_type": "1", "metadata": {"Header_1": " Set up", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "ba6e32d5ba9e1ae237939f13739ccd9bc8b2106038fc8e8d6ad13ebc4f8e34ca", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1775b12d-0db3-427b-bb38-02b288fc0f8c", "node_type": "1", "metadata": {"Header_1": " Query"}, "hash": "372cc0641ca2937e03723c4b0c5df8104cc0bd00fd3643eaf1228581e1010652", "class_name": "RelatedNodeInfo"}}, "text": "Ingest Documents\n\nSuppose your application has multiple users, and you would like to tag each\nuser\u2019s document to provide isolation. Your application logic can be\nimplemented as follows. For simplicity, here we demo ingesting public\ndocuments. Currently, Zilliz Cloud Pipelines [ supports\n](https://docs.zilliz.com/docs/run-pipelines#run-an-ingestion-\npipeline?utm_source=referral&utm_medium=partner&utm_campaign=2024-01-18_blog_zcp-\nllamaindex_llamaindex) documents stored and managed in AWS S3 and Google Cloud\nStorage. Local document upload will also be supported soon.\n\n    \n    \n    # user1 ingests a document, it is technical documentation for v2.3 version. \n    zcp_index.insert_doc_url(\n        url=\"https://publicdataset.zillizcloud.com/milvus_doc.md\",\n        metadata={\"user_id\": \"user1\", \"version\": \"2.3\"},\n    )\n    # user2 ingests a document, it is technical documentation for v2.2 version. \n    zcp_index.insert_doc_url(\n        url=\"https://publicdataset.zillizcloud.com/milvus_doc_22.md\",\n        metadata={\"user_id\": \"user2\", \"version\": \"2.2\"},\n    )", "mimetype": "text/plain", "start_char_idx": 3195, "end_char_idx": 4262, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "1775b12d-0db3-427b-bb38-02b288fc0f8c": {"__data__": {"id_": "1775b12d-0db3-427b-bb38-02b288fc0f8c", "embedding": null, "metadata": {"Header_1": " Query", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30d43f82-a119-4782-81fe-f03dd69a9768", "node_type": "4", "metadata": {"filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "7a2fbbd8b49be60e4f4d69b2b010168ddc957b06828b11a02ac22adfbfd31e27", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4484e815-a0b3-4170-bbe4-00226df4960e", "node_type": "1", "metadata": {"Header_1": " Ingest Documents", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "ea6fa30e99a7a355e67af7ff50cfb1ce66ab54f7d48d08fb2a5bebe677f3eefe", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "360f2778-26e9-4c05-b46a-bf758bd51621", "node_type": "1", "metadata": {"Header_1": " What to do next?"}, "hash": "0a3b7d19b2d4de5dca710c7ee0acb857ed8e7009716146e9c11c7e71b30066ca", "class_name": "RelatedNodeInfo"}}, "text": "Query\n\nTo conduct semantic search with _ZillizCloudPipelineIndex_ , you can use it\n_as_query_engine()_ by specifying a few parameters:\n\n  * search_top_k: How many text nodes/chunks to retrieve. Optional, defaults to DEFAULT_SIMILARITY_TOP_K (2). \n  * filters: Metadata filters. Optional, defaults to None. In this example, we set the filter to only retrieve docs of a specific user, to provide user-level data isolation. \n  * output_metadata: What metadata fields to return with the retrieved text node. Optional, defaults to []. \n\n    \n    \n    # Query the documents in ZillizCloudPipelineIndex\n    from llama_index.vector_stores.types import ExactMatchFilter, MetadataFilters\n    \n    query_engine_for_user1 = zcp_index.as_query_engine(\n        search_top_k=3,\n        filters=MetadataFilters(\n            filters=[\n                ExactMatchFilter(key=\"user_id\", value=\"user1\")\n            ]  # The query would only search from documents of user1.\n        ),\n        output_metadata=[\"user_id\", \"version\"], # output these tags together with document text\n    )\n    \n    question = \"Can users delete entities by complex boolean expressions?\"\n    # The chatbot will only answer with the retrieved information from user1's documents\n    answer = query_engine_for_user1.query(question)\n\nThanks to the abstraction of LlamaIndex and Zilliz Cloud Pipelines, with just\n30 lines of code, we can demo a RAG service that supports multi-tenancy. Most\nimportantly, this simple RAG app could easily scale to serving millions of\nusers without changing any code.", "mimetype": "text/plain", "start_char_idx": 4267, "end_char_idx": 5816, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "360f2778-26e9-4c05-b46a-bf758bd51621": {"__data__": {"id_": "360f2778-26e9-4c05-b46a-bf758bd51621", "embedding": null, "metadata": {"Header_1": " What to do next?", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30d43f82-a119-4782-81fe-f03dd69a9768", "node_type": "4", "metadata": {"filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "7a2fbbd8b49be60e4f4d69b2b010168ddc957b06828b11a02ac22adfbfd31e27", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1775b12d-0db3-427b-bb38-02b288fc0f8c", "node_type": "1", "metadata": {"Header_1": " Query", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}, "hash": "a06a78ef94e014611cb7e1e002a94cbb35acdb45e647e994ce4928eb27bfc51b", "class_name": "RelatedNodeInfo"}}, "text": "What to do next?\n\nYou can check out the official [ LlamaIndex documentation\n](https://docs.llamaindex.ai/en/stable/examples/managed/zcpDemo.html#managed-\nindex-with-zilliz-cloud-pipelines) to learn about advanced customization of\n_ZillizCloudPipelineIndex_ . Please ask questions at [ Zilliz user group\n](https://discord.gg/8uyFbECzPX) or [ LlamaIndex discord\n](https://discord.com/invite/eN6D2HQ4aX) if you have any questions. Zilliz\nCloud Pipelines will soon support local file upload and more choices of\nembedding and re-ranker models. Get a free [ Zilliz Cloud\n](https://cloud.zilliz.com/signup?utm_source=referral&utm_medium=partner&utm_campaign=2024-01-18_blog_zcp-\nllamaindex_llamaindex&utm_content=llamaindex) account and stay tuned for more\nupdates!", "mimetype": "text/plain", "start_char_idx": 5821, "end_char_idx": 6579, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"4aa3e54c-1be8-4e7e-97ab-574a928f4a4f": {"doc_hash": "9cfb6bfcbc72f7fb9dfe4488aaee806aaceb5111fbe30087b02a40310fe79a49", "ref_doc_id": "30d43f82-a119-4782-81fe-f03dd69a9768"}, "0c50c51a-a2e9-4548-8ff5-34a6ab9d2aa3": {"doc_hash": "ba6e32d5ba9e1ae237939f13739ccd9bc8b2106038fc8e8d6ad13ebc4f8e34ca", "ref_doc_id": "30d43f82-a119-4782-81fe-f03dd69a9768"}, "4484e815-a0b3-4170-bbe4-00226df4960e": {"doc_hash": "ea6fa30e99a7a355e67af7ff50cfb1ce66ab54f7d48d08fb2a5bebe677f3eefe", "ref_doc_id": "30d43f82-a119-4782-81fe-f03dd69a9768"}, "1775b12d-0db3-427b-bb38-02b288fc0f8c": {"doc_hash": "a06a78ef94e014611cb7e1e002a94cbb35acdb45e647e994ce4928eb27bfc51b", "ref_doc_id": "30d43f82-a119-4782-81fe-f03dd69a9768"}, "360f2778-26e9-4c05-b46a-bf758bd51621": {"doc_hash": "ca056c178388862dd54842e95b030cc5abb6ac60ef6de3a40bbbfdaca8b71273", "ref_doc_id": "30d43f82-a119-4782-81fe-f03dd69a9768"}}, "docstore/ref_doc_info": {"30d43f82-a119-4782-81fe-f03dd69a9768": {"node_ids": ["4aa3e54c-1be8-4e7e-97ab-574a928f4a4f", "0c50c51a-a2e9-4548-8ff5-34a6ab9d2aa3", "4484e815-a0b3-4170-bbe4-00226df4960e", "1775b12d-0db3-427b-bb38-02b288fc0f8c", "360f2778-26e9-4c05-b46a-bf758bd51621"], "metadata": {"Header_1": " Introduction", "filename": "building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf.md", "extension": ".md", "title": "Building Scalable RAG Applications with LlamaIndex and Zilliz Cloud Pipelines", "date": "Jan 25, 2024", "url": "https://www.llamaindex.ai/blog/building-scalable-rag-applications-with-llamaindex-and-zilliz-cloud-pipelines-4879e9768baf"}}}}