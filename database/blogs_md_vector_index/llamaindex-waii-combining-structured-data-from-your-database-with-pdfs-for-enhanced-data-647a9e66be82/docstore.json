{"docstore/data": {"46ea01ea-8e8a-4113-819f-fc106153b685": {"__data__": {"id_": "46ea01ea-8e8a-4113-819f-fc106153b685", "embedding": null, "metadata": {"Header_1": " Introduction", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ad2061fd-3e1c-4570-8d98-94ac289a454f", "node_type": "1", "metadata": {"Header_1": " Why a New Text-to-SQL LlamaIndex Plugin?"}, "hash": "ed85aba2d23ffe78dbd21404b113d32552e4af626b3936ee275bbd1a6afd2cda", "class_name": "RelatedNodeInfo"}}, "text": "Introduction\n\nIn many enterprises, data primarily resides in databases and generally, it\u2019s\nvery difficult to combine database data with other forms of data, such as\nPDFs, when trying to generate actionable insights.\n\nWe envision the development of an agent that empowers anyone to leverage data\nfrom all of these data sources for informed decision-making. Imagine an agent\nproficient in creating documents by merging data from diverse sources,\nincluding JIRA and databases, further enriched with the latest internet-\nsourced information.\n\nAt [ waii.ai ](http://waii.ai/) , we are committed to delivering an enterprise\ntext-to-SQL API with the most complete and accurate translation of plain\nEnglish to SQL available. Waii allows companies to build text-to-SQL right\ninto their products as well as enable no-code analytics for their internal\ndata/business teams. Waii works out of the box and can be self-hosted/on-prem.\n\nLlamaIndex introduces a remarkable RAG framework, facilitating the connection\nof various customer data sources, such as PDFs, Notion, and internal knowledge\nbases, to large language models (LLMs). This advancement simplifies the\ncreation of data-augmented chatbots and analysis agents.\n\nThis opens up a prime opportunity to develop an enterprise agent that can\naccess data from multiple sources, including your preferred database. We will\nexplore this further in the rest of the blog.", "mimetype": "text/plain", "start_char_idx": 3, "end_char_idx": 1408, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "ad2061fd-3e1c-4570-8d98-94ac289a454f": {"__data__": {"id_": "ad2061fd-3e1c-4570-8d98-94ac289a454f", "embedding": null, "metadata": {"Header_1": " Why a New Text-to-SQL LlamaIndex Plugin?", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46ea01ea-8e8a-4113-819f-fc106153b685", "node_type": "1", "metadata": {"Header_1": " Introduction", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "8d23dd71f199de8bfcb9a648b58f22bbe32a94c1623f1e1e11ddd9d6032c76e5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c7cecea4-2fb5-4f98-8c81-86adad5aca3f", "node_type": "1", "metadata": {"Header_1": " LlamaIndex + Waii Agent"}, "hash": "b8488d6694a8181d01ba3adde3acdc5769d72c3010a2f2edf9d7f1a40f065c21", "class_name": "RelatedNodeInfo"}}, "text": "Why a New Text-to-SQL LlamaIndex Plugin?\n\nTo enable the Llama Index agent to utilize text-to-SQL APIs, a plugin is\nessential. LlamaIndex already has a built-in text-to-SQL plugin, but why did\nwe decide to create a new LlamaHub plugin?\n\nThe existing text-to-SQL plugin in LlamaIndex has been suitable for handling\nsimple databases (less than 10 tables, 100 columns) with straightforward SQL\nqueries. However, managing medium to large databases, which can include 100s\nof tables and 1000s of columns, presents a complex challenge. Limitations\narise due to the restricted context windows of LLMs, and even those with large\ncontext windows, like GPT-4-turbo with its 128K tokens, can suffer from\ninaccuracies and regression in task retrieval when overloaded with content.\nThis issue is discussed in a [ LlamaIndex study\n](https://x.com/jerryjliu0/status/1722657583331491860?s=20) .\n\nIn contrast, Waii focuses on making query generation more efficient. We have\ndeveloped a built-in compiler to deal with compilation errors from LLMs to\nsupport multiple dialects. Our internal knowledge graph, created from database\nmetadata, constraints, and query history, aids in table/schema selection.\nUsers can also apply semantic rules to schema/table/column, or integrate with\ntheir data catalog services, ensuring the semantic correctness of generated\nqueries, in addition to syntactic correctness.\n\nTo utilize our service, users simply need to connect their database to Waii\nand copy a Waii API key to create a LlamaIndex agent.", "mimetype": "text/plain", "start_char_idx": 1413, "end_char_idx": 2928, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "c7cecea4-2fb5-4f98-8c81-86adad5aca3f": {"__data__": {"id_": "c7cecea4-2fb5-4f98-8c81-86adad5aca3f", "embedding": null, "metadata": {"Header_1": " LlamaIndex + Waii Agent", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ad2061fd-3e1c-4570-8d98-94ac289a454f", "node_type": "1", "metadata": {"Header_1": " Why a New Text-to-SQL LlamaIndex Plugin?", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "e138e0c2bcfa738f618497834e067f740e6f6f43b7f25f65feed1abf7696b0c4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26fb41b3-d6c1-438b-9800-5ad76ccf8cf2", "node_type": "1", "metadata": {"Header_1": " Architecture of LlamaIndex + Waii"}, "hash": "bbe78912deca4b7c561d5f28537dcd3243ec47d2bf9355e32225363eb5d910e7", "class_name": "RelatedNodeInfo"}}, "text": "LlamaIndex + Waii Agent\n\nWe are thrilled to showcase the integration of Waii with LlamaIndex to create\nan agent capable of executing various text-to-SQL tasks and validating the\ndata based on a PDF.\n\nWe\u2019ll be analyzing customers\u2019 top-purchased categories during Christmas time,\nand compare it with [ Deloitte\u2019s holiday retail survey\n](https://www2.deloitte.com/content/dam/insights/articles/us176694_cic_holiday-\nretail-survey/DI_2023-Deloitte-holiday-retail-survey.pdf) report.", "mimetype": "text/plain", "start_char_idx": 2933, "end_char_idx": 3411, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "26fb41b3-d6c1-438b-9800-5ad76ccf8cf2": {"__data__": {"id_": "26fb41b3-d6c1-438b-9800-5ad76ccf8cf2", "embedding": null, "metadata": {"Header_1": " Architecture of LlamaIndex + Waii", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c7cecea4-2fb5-4f98-8c81-86adad5aca3f", "node_type": "1", "metadata": {"Header_1": " LlamaIndex + Waii Agent", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "23c891a7826cc551c48668eb4df74de830bd9264b90e1bc212bb9fabbf5b3538", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a5d05352-4282-4460-9374-c69ae832814b", "node_type": "1", "metadata": {"Header_1": " Create LlamaIndex agent with Waii + PDF Loader"}, "hash": "1cbc4333fcc7855b655985618f3a6f70f04166dabb48bc679d270f16a928eaa4", "class_name": "RelatedNodeInfo"}}, "text": "Architecture of LlamaIndex + Waii\n\nBefore diving into the code example, let\u2019s look at the architecture first:\n\nThe LlamaIndex agent operates on the client side, accompanied by a number of\ntools: Each tool provides function specifications and allows functions to be\nselected based on context and the user\u2019s input to ` **chat(\"\u2026\")** ` . For\nexample, if the question indicates information needs to be retrieved from the\n\u201cinternet\u201d, the Google search tool will be chosen. Internally it uses LLM\nwhich returns selected functions with parameters for a given context.\n\nWhen the Waii tool is chosen, whether for describing a dataset, generating a\nquery, or running a query, it sends the API request to the Waii Service.\n\nThe Waii Service can be deployed as a hosted SaaS or as Docker containers\nrunning in your on-premises environment. The components of the Waii Service\ninclude:\n\n  * **The Query Generator:** coordinates the entire workflow of query generation and communicates with the LLM for this purpose. \n  * **Knowledge Graph / Metadata Management** : connects to databases, extracting metadata and query history as a knowledge graph to assist the Query Generator in choosing the right tables and schemas. \n  * **Semantic Rules** : These aid the Query Generator in producing semantically correct queries. \n  * **Waii Compiler** : After a query is generated by the LLM, the Waii Compiler patches identified issues in the query. If a compilation issue is not fixable, it regenerates the query with an articulated error message.", "mimetype": "text/plain", "start_char_idx": 3416, "end_char_idx": 4940, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "a5d05352-4282-4460-9374-c69ae832814b": {"__data__": {"id_": "a5d05352-4282-4460-9374-c69ae832814b", "embedding": null, "metadata": {"Header_1": " Create LlamaIndex agent with Waii + PDF Loader", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26fb41b3-d6c1-438b-9800-5ad76ccf8cf2", "node_type": "1", "metadata": {"Header_1": " Architecture of LlamaIndex + Waii", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "189fa98714556a50d0547f3c8bc7db11f03b738fc5ae698eeafc1fda02f27800", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6943ac93-e5b1-492d-a7e9-484c01248420", "node_type": "1", "metadata": {"Header_1": " Understand your dataset"}, "hash": "478ed62e89105bd7374dd6a2e604a42138e8bd828dbd21eda45de7c814c98d0f", "class_name": "RelatedNodeInfo"}}, "text": "Create LlamaIndex agent with Waii + PDF Loader\n\nLet\u2019s first create two LlamaHub tools \u2014 Waii and PDF Loader. LlamaHub tools\ninclude specs to identify available functions along with their parameters, the\nagent will select and execute which function to use based on available\nfunctions and context.\n\nLet\u2019s start with creating an agent which includes the Waii tool:\n\n    \n    \n    from llama_hub.tools.google_search import GoogleSearchToolSpecfrom llama_hub.tools.waii import WaiiToolSpecfrom llama_index.agent import OpenAIAgentfrom llama_index.llms import OpenAIwaii_tool = WaiiToolSpec(    api_key='waii_api_key',    # Connection key of WAII connected database, see     # https://github.com/waii-ai/waii-sdk-py#get-connections    database_key='database_to_use',    verbose=True)\n\nAnd then create a PDF tool:\n\n    \n    \n    from pathlib import Pathfrom llama_index import download_loaderfrom llama_index import VectorStoreIndexPDFReader = download_loader(\"PDFReader\")loader = PDFReader()documents = loader.load_data(file=Path('DI_2023-Deloitte-holiday-retail-survey.pdf'))index = VectorStoreIndex.from_documents(documents)engine = index.as_query_engine(similarity_top_k=5)deloitte_retail_survey_tool = QueryEngineTool(        query_engine=engine,        metadata=ToolMetadata(            name=\"deloitte_retail_survey\",            description=(                \"Provides retail survey report for holiday sales based on Deloitte's data\"                \"Use a detailed plain text question as input to the tool, and output using plain text based on pdf data\"            ),        ),    )\n\nAnd at last, create an agent which combines Waii and PDF tools:\n\n    \n    \n    agent = OpenAIAgent.from_tools(  [deloitte_retail_survey_tool] + waii_tool.to_tool_list(),   llm=OpenAI(model='gpt-4-1106-preview', temperature=0),   verbose=True)\n\n` [deloitte_retail_survey_tool] + waii_tool.to_tool_list() ` indicate using\nall functions (such as getting answers from the database, generating a query,\nexecuting a query, describing datasets, etc.) provided by Waii and PDF Search.", "mimetype": "text/plain", "start_char_idx": 4946, "end_char_idx": 7005, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "6943ac93-e5b1-492d-a7e9-484c01248420": {"__data__": {"id_": "6943ac93-e5b1-492d-a7e9-484c01248420", "embedding": null, "metadata": {"Header_1": " Understand your dataset", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a5d05352-4282-4460-9374-c69ae832814b", "node_type": "1", "metadata": {"Header_1": " Create LlamaIndex agent with Waii + PDF Loader", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "eb55527d4b14b08500d8cc8ffe31162cc7eb2cfa15aef231c1843911101c247f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cd96fe85-5a19-47fc-9cfb-fa707bff88a5", "node_type": "1", "metadata": {"Header_1": " Generate an SQL query and run it"}, "hash": "0d452f29795792340822b81f5f5acc8d8c40ff5331549dc8e1051cd681abbcdf", "class_name": "RelatedNodeInfo"}}, "text": "Understand your dataset\n\nThe first step in doing data analysis is to get a better understanding of your\ndataset.\n\nYou can start asking questions to your agent:\n\n    \n    \n    agent.chat(\"Describe my database\")\n\nThe output of which is:\n\n    \n    \n    STARTING TURN 1---------------=== Calling Function ===Calling function: describe_dataset with args:   {\"ask\":\"Can you describe the whole database?\"}...========================STARTING TURN 2---------------The database I have access to consists of several schemas, each with its own set of tables and domains:1. **CRUNCHBASE_2016**: This schema includes tables related to acquisitions,    companies, investments, and funding rounds in the Crunchbase database for   the year 2016. It's useful for analyzing acquisition trends, company    information, investment activity, and funding trends.2. **RETAIL_DATA**: This schema contains tables related to retail operations,    such as call centers, customers, addresses, demographics, inventory,    items, promotions, stores, returns, sales, and warehouses. It can be used    to analyze call center performance, customer demographics, inventory    management, sales performance, and other retail operations.3. ...\n\nAs you can see, the agent understood the request, called ` describe_dataset `\nfunction provided by Waii, and generated a summary of the dataset.\n\nI\u2019m interested in the ` RETAIL_DATA ` schema, so let me ask more of the schema\n-\n\n    \n    \n    agent.chat(\"What can i do with the retail_data schema\")\n\nAnd I get this:\n\n    \n    \n    The RETAIL_DATA schema in the TWEAKIT_PLAYGROUND database is designed to support a wide range of analyses related to retail operations. Here are some of the capabilities and types of analyses you can perform with this schema:1. **Call Center Analysis**: Evaluate the performance of call centers,    understand call volumes, and assess customer service efficiency.2. **Customer Demographics**: Analyze customer profiles, including    demographics, purchasing behaviors, and preferences. This can help    in targeted marketing and customer segmentation.Specific questions that can be addressed using the RETAIL_DATA schema include:- What is the total number of call centers?- How many customers have a preferred customer flag?- What is the average price of items?\n\nLet me do some more data analysis.", "mimetype": "text/plain", "start_char_idx": 7010, "end_char_idx": 9345, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "cd96fe85-5a19-47fc-9cfb-fa707bff88a5": {"__data__": {"id_": "cd96fe85-5a19-47fc-9cfb-fa707bff88a5", "embedding": null, "metadata": {"Header_1": " Generate an SQL query and run it", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6943ac93-e5b1-492d-a7e9-484c01248420", "node_type": "1", "metadata": {"Header_1": " Understand your dataset", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "be060490ad75b4e97cb16f421abcd8b6ba6b090a3e3dc9fa31a24495b057f0db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0d300af2-9e5a-4e26-99ef-1551e2c4cbe1", "node_type": "1", "metadata": {"Header_1": " Use with a PDF report"}, "hash": "771abbc878a3cd07e65b1747574b25c05acb02421f4074c4bbb5b7ef646afae1", "class_name": "RelatedNodeInfo"}}, "text": "Generate an SQL query and run it\n\nLet\u2019s generate a SQL query (asking top 10 item categories sold during\nChristmas time):\n\n    \n    \n    agent.chat(\"Top 10 item category sold during christmas time across all years\")\n\nNow it calls ` get_answer ` function from Waii tool:\n\n    \n    \n    === Calling Function ===Calling function: get_answer with args:   {\"ask\":\"What are the top 10 item categories sold during           Christmas time across all years?\"}\n\nAnd got a SQL like:\n\n    \n    \n    WITH christmas_sales AS (    SELECT        ss_item_sk,        SUM(ss_quantity) AS total_quantity    FROM tweakit_playground.retail_data.store_sales AS ss    INNER JOIN tweakit_playground.retail_data.date_dim AS dd        ON ss_sold_date_sk = d_date_sk    WHERE        d_holiday = 'Y' AND d_date ILIKE '%-12-25'    GROUP BY        ss_item_sk),ranked_categories AS (    SELECT        i_category,        SUM(total_quantity) AS category_quantity    FROM christmas_sales AS cs    INNER JOIN tweakit_playground.retail_data.item AS i        ON ss_item_sk = i_item_sk    GROUP BY        i_category    ORDER BY        category_quantity DESC    LIMIT 10)SELECT    i_category AS category,    category_quantityFROM ranked_categories\n\nLet me ask it to run the query:\n\n    \n    \n    agent.chat(\"Run it\")\n\nI got a Dataframe along with its summary:\n\n    \n    \n    The top 10 item categories sold during Christmas time across all years, based on the total quantity of items, are:1. Women: 1,487,8912. Sports: 1,486,6443. Children: 1,483,5314. Electronics: 1,478,4635. Music: 1,476,0456. Books: 1,472,9117. Home: 1,471,3488. Jewelry: 1,459,0259. Shoes: 1,456,29610. Men: 1,451,285", "mimetype": "text/plain", "start_char_idx": 9350, "end_char_idx": 10999, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "0d300af2-9e5a-4e26-99ef-1551e2c4cbe1": {"__data__": {"id_": "0d300af2-9e5a-4e26-99ef-1551e2c4cbe1", "embedding": null, "metadata": {"Header_1": " Use with a PDF report", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cd96fe85-5a19-47fc-9cfb-fa707bff88a5", "node_type": "1", "metadata": {"Header_1": " Generate an SQL query and run it", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "e8e6564e70c14d5af9551e1175a4c7664f17f4dfffbde06669a2583d140806ee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "10f8fbf8-4f0c-4fc7-999a-dbda09d326a5", "node_type": "1", "metadata": {"Header_1": " Wrapping up"}, "hash": "39e4fb7759f0e3fb59be455294fed21d9047621076a51dccdced5b3749b9d7d9", "class_name": "RelatedNodeInfo"}}, "text": "Use with a PDF report\n\nLet\u2019s try to cross-check the result with the [ holiday retailer report (in PDF\nform) from Deloitte\n](https://www2.deloitte.com/content/dam/insights/articles/us176694_cic_holiday-\nretail-survey/DI_2023-Deloitte-holiday-retail-survey.pdf) \u2014 Are Deloitte\u2019s\ntop-purchased gift categories the same as what we saw from the database?\n\nTop gift categories during the holiday\n\nThere\u2019s one page from the pdf we are interested in \u2014 let\u2019s see if we can\nretrieve this page\n\n    \n    \n    agent.chat(\"\"\"Give me top holiday gift categories based on Deloitte's holiday retail survey, and how it is different from the top 10 item category sold during christmas time across all years from my database\"\"\")\n\nThe output looks like the following, which indicates it uses the `\ndeloitte_retail_survey ` tool to obtain insights from the PDF.\n\n    \n    \n    STARTING TURN 1---------------=== Calling Function ===Calling function: deloitte_retail_survey with args: {\"input\": \"What are the top holiday gift categories based on Deloitte's holiday retail survey?\"}...\n\nIt gives the following summary:\n\n    \n    \n    Based on Deloitte's holiday retail survey, the top holiday gift categories are:1. Clothing & Accessories2. Gift Cards & Other3. Food & Beverage...From your database, the top 10 item categories sold during Christmas time across all years are:1. Women2. Sports3. Children...Comparing the two lists, we can see some differences and similarities:- \"Clothing & Accessories\" from Deloitte's survey could correspond to   \"Women,\" \"Men,\" and possibly \"Children\" from your database.- \"Electronics & Accessories\" is a common category in both lists.- \"Gift Cards & Other\" and \"Food & Beverage\" from Deloitte's survey do   not have a direct match in the top categories from your database....\n\nBingo! Now we can compare the results from our database with PDFs. And I love\nseeing how the agent can correlate the two lists and tell me that my store\ndoesn\u2019t have the \u201cGift Cards & Other\u201d and \u201cFood & Beverage\u201d categories!\n\nYou can find the code from the Colab notebook [ link\n](https://colab.research.google.com/drive/1hL_Ztb1DRcdyeO2JZwsc9osW0Y3chP9c#scrollTo=fvye9sqAcn5j)", "mimetype": "text/plain", "start_char_idx": 11004, "end_char_idx": 13172, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}, "10f8fbf8-4f0c-4fc7-999a-dbda09d326a5": {"__data__": {"id_": "10f8fbf8-4f0c-4fc7-999a-dbda09d326a5", "embedding": null, "metadata": {"Header_1": " Wrapping up", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b", "node_type": "4", "metadata": {"filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "117108173563c63de81da06be7e49271af15340be0d02f515876c3f6e0c1c458", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0d300af2-9e5a-4e26-99ef-1551e2c4cbe1", "node_type": "1", "metadata": {"Header_1": " Use with a PDF report", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}, "hash": "37ab2486098ec2d469ccb8ce5bdd9b78b21c3608f583bc09a1f80056219ce0fd", "class_name": "RelatedNodeInfo"}}, "text": "Wrapping up\n\nThe integration of Waii\u2019s text-to-SQL API with LlamaIndex\u2019s RAG framework\nmarks a significant advancement in enterprise data analytics. This powerful\ncombination enables companies to effortlessly merge and analyze data from\nvarious sources, including databases, PDFs, and the Internet. We demonstrated\nthe agent\u2019s capability to generate SQL queries, understand complex datasets,\nand correlate findings with external reports. This innovation not only\nsimplifies data analysis but also opens new avenues for informed decision-\nmaking in the digital era.\n\nTo learn more about Waii, please contact us here: [\nhttps://www.waii.ai/#request-demo ](https://www.waii.ai/#request-demo)", "mimetype": "text/plain", "start_char_idx": 13177, "end_char_idx": 13865, "text_template": "{metadata_str}\n\n{content}", "metadata_template": "{key}: {value}", "metadata_seperator": "\n", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"46ea01ea-8e8a-4113-819f-fc106153b685": {"doc_hash": "8d23dd71f199de8bfcb9a648b58f22bbe32a94c1623f1e1e11ddd9d6032c76e5", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "ad2061fd-3e1c-4570-8d98-94ac289a454f": {"doc_hash": "e138e0c2bcfa738f618497834e067f740e6f6f43b7f25f65feed1abf7696b0c4", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "c7cecea4-2fb5-4f98-8c81-86adad5aca3f": {"doc_hash": "23c891a7826cc551c48668eb4df74de830bd9264b90e1bc212bb9fabbf5b3538", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "26fb41b3-d6c1-438b-9800-5ad76ccf8cf2": {"doc_hash": "189fa98714556a50d0547f3c8bc7db11f03b738fc5ae698eeafc1fda02f27800", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "a5d05352-4282-4460-9374-c69ae832814b": {"doc_hash": "eb55527d4b14b08500d8cc8ffe31162cc7eb2cfa15aef231c1843911101c247f", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "6943ac93-e5b1-492d-a7e9-484c01248420": {"doc_hash": "be060490ad75b4e97cb16f421abcd8b6ba6b090a3e3dc9fa31a24495b057f0db", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "cd96fe85-5a19-47fc-9cfb-fa707bff88a5": {"doc_hash": "e8e6564e70c14d5af9551e1175a4c7664f17f4dfffbde06669a2583d140806ee", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "0d300af2-9e5a-4e26-99ef-1551e2c4cbe1": {"doc_hash": "37ab2486098ec2d469ccb8ce5bdd9b78b21c3608f583bc09a1f80056219ce0fd", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}, "10f8fbf8-4f0c-4fc7-999a-dbda09d326a5": {"doc_hash": "3ec875adb58bef0ea082142773a7c69feacd0faa76081da50c4070729bd5e4fe", "ref_doc_id": "2b5d5fd5-bd90-44ba-b74d-1231b263248b"}}, "docstore/ref_doc_info": {"2b5d5fd5-bd90-44ba-b74d-1231b263248b": {"node_ids": ["46ea01ea-8e8a-4113-819f-fc106153b685", "ad2061fd-3e1c-4570-8d98-94ac289a454f", "c7cecea4-2fb5-4f98-8c81-86adad5aca3f", "26fb41b3-d6c1-438b-9800-5ad76ccf8cf2", "a5d05352-4282-4460-9374-c69ae832814b", "6943ac93-e5b1-492d-a7e9-484c01248420", "cd96fe85-5a19-47fc-9cfb-fa707bff88a5", "0d300af2-9e5a-4e26-99ef-1551e2c4cbe1", "10f8fbf8-4f0c-4fc7-999a-dbda09d326a5"], "metadata": {"Header_1": " Introduction", "filename": "llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82.md", "extension": ".md", "title": "LlamaIndex + Waii: Combining Structured Data from your Database with PDFs for Enhanced Data Analysis", "date": "Dec 6, 2023", "url": "https://www.llamaindex.ai/blog/llamaindex-waii-combining-structured-data-from-your-database-with-pdfs-for-enhanced-data-647a9e66be82"}}}}